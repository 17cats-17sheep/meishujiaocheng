# 高级动态服装部件

## 绑定分类

- 通用骨架部件

​       短裙，中裙，长裙

- 自定义骨架部件

​       前发，后发，袖摆，尾巴等等

## 挂点类型

- 不同的**部件**需要**匹配**对应的**挂点**，角色骨架自带挂点如下：

|   **功能**   |     命名      |                        位置示例                        |
| :----------: | :-----------: | :----------------------------------------------------: |
| 头发虚拟挂点 |   Hair_Root   | ![img](https://arkimg.ark.online/1690956506654-1.png)  |
| 裙子虚拟挂点 |  Skirt_Root   | ![img](https://arkimg.ark.online/1690956538033-4.png)  |
| 裙子虚拟挂点 | Skirt_01_Root | ![img](https://arkimg.ark.online/1690956593897-7.png)  |
| 披风虚拟挂点 |  Cloak_Root   | ![img](https://arkimg.ark.online/1690956634392-10.png) |
| 袖摆虚拟挂点 | Lower_R_Root  | ![img](https://arkimg.ark.online/1690956712033-13.png) |
| 袖摆虚拟挂点 | Lower_L_Root  | ![img](https://arkimg.ark.online/1690956731738-16.png) |

- 后续可能会继续添加其他位置的虚拟挂点

## 绑定流程

### 通用骨架部件（中裙为例）：

- 选择骨架：

| 裙子分类                   |                      裙子的max骨架与FBX                      |                       参考图片                        |
| -------------------------- | :----------------------------------------------------------: | :---------------------------------------------------: |
| 短裙（腰腹至大腿一半以内） | [短裙（点此下载）](https://arkimg.ark.online/%E7%9F%AD%E8%A3%99.zip) | ![img](https://arkimg.ark.online/1690956953578-1.png) |
| 中裙（腰腹至小腿一半以内） | [中裙（点此下载）](https://arkimg.ark.online/%E4%B8%AD%E8%A3%99.zip) | ![img](https://arkimg.ark.online/1690956980572-4.png) |
| 长裙（腰腹至地面及以上）   | [长裙（点此下载）](https://arkimg.ark.online/%E9%95%BF%E8%A3%99.zip) | ![img](https://arkimg.ark.online/1690956997952-7.png) |

- 选择挂点

  腰部及以上切口的裙子使用**Skirt_Root**挂点

  胯部及以下切口的裙子使用**Skirt_01_Root**挂点
![img](https://arkimg.ark.online/1690957160643-10.png)

- 根据模型适配选择的骨架，骨架可做位移和旋转调整，禁止对骨架进行缩放操作
- 模型添加Skin进行绑定，添加**相关骨骼**和裙子根节点**虚拟体**，蒙皮骨骼影响限制为3
- 末端骨骼不参与蒙皮绑定且裙子和身体的接缝处的权重值给根结点1的权重
  ![img](https://arkimg.ark.online/1690957195618-13.png)

- 将裙子骨骼的根节点归零，然后在View坐标系，把Root根节点Y轴旋转90°
  ![img](https://arkimg.ark.online/1690957249760-16.png)

- 导出裙子的蒙皮信息导出，选中模型转换为Poly（该操作为了保证模型在编辑器中**效果正常**）

![img](https://arkimg.ark.online/1690957350945-19.png)最后选中模型添加蒙皮（Skin)，添加对应的蒙皮骨骼，导入刚刚导出的蒙皮信息![img](https://arkimg.ark.online/1690957746322-25.png)

### 自定义骨架部件（头发为例）：

- 新建根节点虚拟体和头发挂点进行位置对齐（**旋转**属性一定要是0），命名为**Hair_Root**
- 头发类型（前发，后发）架设适配的**BONE**骨骼
- 前发骨骼命名为：**HairA_XXX**，后发骨骼命名为：**HairB_XXX （**XXX代表**数字）**
- 前，后发的**根骨骼**链接给头发根节点
- 分别对前，后发进行蒙皮（**Skin**），选中模型对应的骨骼和根节点，骨骼影响限制数为**3**

![img](https://arkimg.ark.online/1690957980962-28-1690958020736-33.png)

- 将头发骨骼的根节点归零，并在View坐标系Y轴旋转90°![img](https://arkimg.ark.online/1690958281968-36.png)
- 分别导出头发的蒙皮信息，选中模型转换为Poly（该操作为了保证模型在编辑器中**效果正常）**

![img](https://arkimg.ark.online/1690958481961-39.png)

![img](https://arkimg.ark.online/1690958958114-45-1690958989963-50.png)

- 最后分别选中模型添加蒙皮（Skin），添加对应的蒙皮骨骼，导入刚刚导出的蒙皮信息

![img](https://arkimg.ark.online/1690960409670-53-1690960431805-58.png)

模型绑定案例参考的源文件：

| 3Dmax绑定源文件 | [案例文件（点此下载）](https://arkimg.ark.online/SK_Girl_0002h47zyd.max) |
| :-------------: | :----------------------------------------------------------: |