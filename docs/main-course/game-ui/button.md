# 按钮

::: tip 阅读本文大概需要 8 分钟。

鼓掌~在手游的 UI 开发中最常用的控件，按钮控件来啦！如今是手机全面屏时代，任何与游戏 UI 的交互都离不开屏幕上的虚拟按键，也就是我们的按钮控件了，接下来我们就来一起看一下按钮控件是如何使用的。

:::

## 1.创建按钮

按钮可以说是最常用的控件之一了，无论是游戏中还是应用中，按钮到处可见，我们不断点击各种按钮进行各类事件的触发。接下来，我们就来创建一个按钮，双击我们创建的“MyUI”文件打开 UI 编辑器，从“组件”窗口中选中“按钮”并拖拽到画布中来，如图：

![](https://cdn.233xyx.com/1681134748248_752.png)

在按钮的“对象属性”窗口中可以看到，对按钮来说最重要的三组属性，分别是样式、过渡模式、事件，如图：

![](https://cdn.233xyx.com/1681134748455_804.png)

接下来我们分别讲解一下其中常用的一些设置。

## 2.文本

按钮支持添加文本子物体，以支持按钮中显示文字，可以将文本控件直接拖拽到按钮上，如图：

![](https://cdn.233xyx.com/1681134748504_485.png)

接下来选中拖拽进来的文本控件，修改文字内容和颜色等内容，按钮就可以显示出文字了，如图：

![](https://cdn.233xyx.com/1681134748197_970.png)

## 3.过渡模式

这里为了显示效果好点，首先删除按钮上的文本，然后给按钮添加一个图片，如图：

![](https://cdn.233xyx.com/1681134748299_750.png)

这时候我们保存 UI，回到编辑器界面，运行游戏，然后点击按钮，你会发现，按钮并没有点击的过渡效果，导致我们也不确定这个按钮是否被按下，甚至怀疑我们点的是一张图片而不是一个按钮，如图：

![](https://cdn.233xyx.com/1681134748150_934.gif)

这时候我们就需要开启“过渡模式”选项了，勾选“是否有过渡模式”选项，可以看到多出两项设置，一项是给按钮的“按压图片”设置，一项是给按钮的“禁用图片”设置，这里我们修改了一下“按压图片”中的图片颜色，当然你也可以直接添加一个新的 UI 图像，具体设置与图片控件相同，就不赘述了，如图：

![](https://cdn.233xyx.com/1681134748353_383.png)

设置完成，保存 UI 后，再次运行游戏，看下效果，我们已经看到按钮有了点击效果了，如图：

![](https://cdn.233xyx.com/1681134748405_950.gif)

## 4.按钮事件

按钮控件，最重要的事情，那就是和事件进行关联了，按钮控件给我们提供了很多事件触发方式，例如：点击按钮触发、按下按钮触发、松开按钮触发等，这里面最常用的就是点击按钮触发事件了，接下来我们就来说下如何为按钮添加事件的方式。

为了统一，这里我们打开 UI 编辑器，修改“对象列表”面板中的对象名称如下图：

![](https://cdn.233xyx.com/1681134748051_585.png)

接下来我们使用纯代码方式如何添加事件，这里打开我们的 MyUI 脚本，编写代码如下：

```ts
export default class MyUI extends UI.UIBehavior {

    
    protected onStart() {
        //通过路径查找 Button_1 按钮
        let button = this.uiWidgetBase.findChildByPath("RootCanvas/Button_1") as UI.Button
        //为按钮关联点击事件
        button.onClicked.add(this.onClick.bind(this))
    }
 
    //关联的按钮点击事件
    public onClick(){
        console.log("被点击了")
    }
    
}
```

读完上述代码和注释应该就能了解到，该代码主要做了三件事，首先通过 UI 编辑器“对象列表”面板的父子关系路径获取到按钮对象，然后为按钮添加了一个事件，也就是上述代码的 buttonClick 方法，最后当用户点击按钮就会触发该方法，在该方法中，我们输出了文本，运行游戏后，点击按钮，可以看到：

![](https://cdn.233xyx.com/1681134748557_322.png)