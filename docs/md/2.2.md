# 2.2 客户端与服务端

::: TIP 阅读本文大概需要 9 分钟。

口袋方舟编辑器的一大核心功能就是可以让开发者快速便捷的制作一款多人游戏，那么既然是多人游戏，首先要了解一下什么是客户端，什么是服务端。

:::

更多网络相关查看产品文档：[网络同步原理和结构](https://docs.ark.online/Scripting/NetworkSynchronizationStructureandMechanics.html)

<video controls src="https://cdn.233xyx.com/1681114091719_118.mp4"></video>

![](https://wstatic-a1.233leyuan.com/productdocs/static/boxcnM7fx4TyFOXUdZK62JZrXIR.png)

## 1. 传统游戏服务端 Server

服务端一般指的是在独立的服务器上运行的一套程序，该程序主要用来控制客户端的游戏逻辑，接收并处理客户端的请求、为客户端提供游戏资源、保存客户端数据等操作。

传统游戏开发中，我们开发一个多人联网游戏，需要我们除了编写客户端的游戏代码外，还要编写一个代码量庞大的独立服务端应用，并购买一个服务器，将服务端应用部署到服务器中，才算完成服务端部分。

## 2. 传统游戏客户端 Client

客户端也是玩家端，是玩家直接操作进行游戏操作的程序，主要用来与服务端联网后接收用户的各类输入，并显示各种游戏效果。服务端与客户端是一个一对多的形态，每一个客户端就运行在一个用户的一个游戏设备上，如手机、电脑、主机等。

## 3. 口袋方舟中的客户端与服务端

在上面小节可以看到，传统游戏开发中，制作一个多人联网游戏，除了开发客户端部分外，还需要耗费大量的人力、财力来开发服务端部分，对于独立游戏或工作室来说，是一个不小的压力。

口袋方舟 Editor 提供了服务端供开发者免费使用，不需要用户进行编写单独的服务端代码并部署等繁杂操作。在口袋方舟 Editor 中，给开发者提供了非常好用的网络同步能力，并且不需要区分客户端与服务端进行脚本编写，开发者只需要了解自己的游戏逻辑中哪些代码应该在客户端编写、哪些代码应该在服务端编写，就可以开发出一款十分精美的多人联机游戏了。

### 3.1 运行环境

口袋方舟 Editor 中，我们创建的每个游戏物体，都有三种运行环境，第一种是纯客户端运行，第二种是纯服务端运行，第三种是客户端和服务端运行，这里使用表格列出它们的区别，大家可以先看一下该表格作为了解，等编辑器的基本开发流程掌握熟练后，推荐大家再回来详细研究该表格，表格如图：

| 运行环境   | 客户端![](https://wstatic-a1.233leyuan.com/productdocs/static/boxcngxgAOwI5RdKJdqvl0ck6db.png) | 服务端![](https://wstatic-a1.233leyuan.com/productdocs/static/boxcngswGNJegKAAC29d5prBaZF.png) | 客户端和服务端 ![](https://wstatic-a1.233leyuan.com/productdocs/static/boxcnMxcF8CUevCWqGDmadK8KIf.png)       |
| ---------- | ------------------------------------------------------ | ------------------------------------------------------ | ---------------------- |
| 客户端显示 | ✔                                                     | ❌                                                     | ✔                                                                   |
| 服务端显示 | ❌                                                     | ✔                                                     | ✔                                                                   |
| 是否有碰撞 | ❌                                                     | ❌                                                     | ✔                                                                   |
| 客户端控制 | ✔                                                     | ❌                                                     | ✔                                                                   |
| 服务端控制 | ❌                                                     | ✔                                                     | ✔                                                                   |
| 生成方式   | 客户端生成    | 服务端生成    | 服务端生成对象然后同步给客户端，客户端根据同步来的数据再生成这个对象 |

这里举些典型的例子帮大家理解该如何选择运行环境：

1. 大部分我们看到的游戏中的物体在抖动，就是前后端不一致，服务端一直拉扯客户端的位置导致的，所以如果需要做碰撞，一定要设置双端。
2. 特效与音效等功能就属于纯客户端效果，不会对游戏在逻辑与功能性上造成任何影响，所以此类代码仅客户端即可。

### 3.2 静态物体/动态物体

在游戏开发中，很多游戏物体从游戏开始到结束，都不会有任何变化，如一块固定的石头、一颗打不坏的树、天空中的云等，这类游戏物体并不需要参与运算也可以正常运行，那么为了拥有更好的性能，我们将两类物体进行区分，上述不会变化的物体我们可以设置为静态物体，而需要在游戏中随时变化的，如移动、旋转、缩放、换色、生成、移除等，那么就需要将该物体设置为动态物体，具体设置方式可以看 [3.6 游戏物体的使用](https://learning.ark.online/md/3.6.html)  。

动态物体与静态物体在不同的运行环境中，也会有不同的效果，这里我们依然列出表格，大家可以先看一下作为了解，等编辑器的基本开发流程掌握熟练后，推荐大家再回来详细研究该表格，表格如图：

动态物体：

|            | 动态 客户端            | 动态 服务端            | 动态 客户端和服务端 |
| ---------- | ---------------------- | ---------------------- | ------------------- |
| 是否可修改 | ✔                     | ✔                     | ✔                  |
| 是否有碰撞 | ✔（可能出现位置拉扯） | ✔（可能出现位置拉扯） | ✔                  |
| 对象存在于 | 客户端                 | 服务端                 | 都有                |

静态物体：

|            | 静态 客户端  | 静态 客户端和服务端 |
| ---------- | -----------  | ------------------- |
| 是否可修改 | ❌    | ❌                  |
| 是否有碰撞 | ❌    | ✔                  |
| 对象存在于 | 客户端    | 都有                |

注意：“静态服务端”是毫无意义的。服务端静态表示这个对象只存在服务端上面，再加上是静态，所有客户端都永远不会知道这个物体的存在，所以是毫无意义的。

