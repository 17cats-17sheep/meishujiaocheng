做游戏最缺什么？素材和角色？编辑器除了提供免费的海量素材资源库外，也提供了角色编辑器，轻松设置几下就可以出现一个优质角色，让你的游戏千人千面，不再为了资源而发愁！

了解更多本节内容见产品文档：[角色编辑工具](https://meta.feishu.cn/wiki/wikcn6DAcVJQOqMNIBVtPcqmrZe)

**暂时无法在MetaApp文档外展示此内容**

# 1. 角色编辑器的使用

首先，在“对象管理器”面板中选中“Player”，也就是我们的主角，然后在属性面板中，单击“编辑玩家形象”按钮，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MWEzNzhiNzkwY2ExNDllYWVkODZiOTA3NjNmMzgxODZfcUxQTDQzRHBqUWNDWTQ4cnZhRndmaWpVbHV1VEtoSjhfVG9rZW46Ym94Y25BeGxiS2NwWUFGc0lYNEJ3elBFMk5nXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

操作完成即可打开我们主角的角色编辑器，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MzU1NzU0NjdkNGMxZDdjYjAyNjYyYTcxZDM3YjRmNjBfTmd3SVJvQTdxOWhGVllMdjVrRWRqNWxXTHhYU25tdFlfVG9rZW46Ym94Y25OdW5vMmNJVlNLMWF1NmVnaEpBUDBnXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 1.角色形象

角色编辑器的使用非常简单，首先在右侧的“属性形象窗口”中，在角色设定中可以切换不同类型的角色，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQ0ZDk3YzBmN2M3OGEyMDg4MTU0ZWY3ZjA1OTRjODBfV0QyQkJIRDFjMFMyQkNYVlo5aE5RMjNITVR4OVRDM0dfVG9rZW46Ym94Y25raVlsMktGMzA5eG4xZ0ZuZmx4VDJiXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

这里展示一个Lowpoly男性角色，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=ZmI5MGNhNzJmZWU3NGYwN2U1ZjBjNzg2MzIyMjA4ZGVfUXlLV21vanFLUXlCVTlwa05Xck9wYXJodGhYSnRzcUtfVG9rZW46Ym94Y25mYk5zWHlwN2NDeDN6dDdlTzg4dm1oXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 2.面部相关

在面部修改界面中，可以看到除了面部整体外，还包括五官、化妆等多处参数可供我们进行修改，方便我们捏出自己喜欢的人物面部，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=YTcwY2ZjNmU2NjM3NjZkMWFmZjI0NTQ2N2JhNTY2ZThfN3A3YXRrZTVCTUlvYmVVcW1FM0I4cEZlMlExUk5meTJfVG9rZW46Ym94Y241eTlsQkFyQmdGRzJzMjN3Z2ZBcXNlXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 3.身材相关

在身材修改面部中，可以看到包括身体、四肢、纹身等内容的修改，可以让你轻松修改为自己需要的身材比例，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=OThmZmEzMzE4ZTg1NDA2NjIyZDM4NjI3Y2Y4NmY0YThfUWNuU1Q4MkliMDAwU3ByZnNiQ3VRdDhBMGlSOEZ1dlZfVG9rZW46Ym94Y244NUswMEQ0eVQ0YUlQMU5kWFNDS2hkXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 4.发型相关

在发型面板中，我们可以为我们的角色更换前发与后发，这里我们来操作一下，首先更换一个前发，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MWNlNTQyZDJlNGM2MjNjODk0Yjc3YWFkOTBmZTYxNzBfZU5FcEZVWTJJVnFqeXhPTVlOaGhtYzFOblVVajhydWFfVG9rZW46Ym94Y255d1o1d05OM2dZWENBcEl4UmV0ZFlkXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

接下来，再更换一个后发，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=YWI2NzE0MmQ5OThiZTc5YzQyYmUwNDYyNjkwMDdlNDRfcTAzWERmbGhxSTFPYW9zZkFTU2xIT3dWbDVwOFJad2hfVG9rZW46Ym94Y25qcHpXSkJ2UFFOa0htNXB3NW9aMUdoXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 5.服饰相关

与发型修改相同，我们可以在这里修改上衣、下衣、手套、鞋的相关资源，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=NWViYWI1Zjk4YTkxNzNkYjk2MDA2MGJmNWUzMjMxMGJfZHhYeVg5dmlObjlTdzhGenJDNGdjcWlMRjhwZk0zOXZfVG9rZW46Ym94Y24wd0J0SWtXTlh1TXRtZGxGY2V3cDBjXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

# 2. 保存与加载角色编辑数据

在角色编辑器中，我们通过“另存为”会将当前角色的搭配数据存到本地，本节我们就来尝试下在脚本中动态的加载搭配数据吧！

## 1.应用捏人数据

打开角色编辑器，进行角色创作，在菜单栏单击“工程-保存”按钮，即可将当前人物形象保存为主角形象，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=OTM0OWQ5YzMzNjUwYjA1MDQ1OTQ5ODc4ZDg0MjM4Njdfb2d4MTRvQml3R1Bpa2hnWnFDYVlSUHJEb3ZPeUxrbUZfVG9rZW46Ym94Y25IZk5RTVp6WFNxcjlDRUs5bXRGQ0RjXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

运行游戏后，可以看到主角已经变成我们捏出的角色了，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=YzJiNDMwOTg0NjZhNDljZTZmNjdiMGI1MWU4MmY0ODhfWnlZNTVHZlhlM0JvVm1tSGExRWdQakNUc3d3Nm5tS0xfVG9rZW46Ym94Y25vdjFHUUhKSk9FS25jaXRZYzM3UEJlXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 2.保存捏人数据

有时候，我们并不想立刻使用捏好的角色形象，而是喜欢在游戏中的某个时刻，动态的进行角色外观更换，这时候就需要将捏好的数据保存下来，单击“另存为按钮”，在弹出窗口中，选择自己需要保存的数据，示例中只保存了发型、上衣、下衣数据，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MWZlNTgxM2YzMzU0YTczZTU1YThkMTJjZTVkODU2NmRfYmo4SjVXZHZwdXdiV2VIRUVObnJuRVJBSmRSRUtXUURfVG9rZW46Ym94Y25HTWJlNW0xd2JRZXBsRG9RbnV6TUxnXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MGFhYTUzYmMxNTBmMmMxM2QxY2ZmMzc4MzIyN2VjMTlfWHpvblpYNlFZa2hVYWhmYk1CQkhhR1JJTmp0TXdIeUtfVG9rZW46Ym94Y25kVDQ1OVd6NFhLMmE1QVdPYVVpOXJkXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

单击“保存选中项”后，输入一个当前搭配的名称即可，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MWFmY2RmN2Q4MTI0ZDczMzc0NWYyMjIwMjA4NzQ5ODFfZlNQeFcwWGRFYTR6eVZyenZydzNManpXRUprVU5kNXVfVG9rZW46Ym94Y25sSlBBMGRQQUlXejBuYlFKUjl6UW9oXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

单击“确定”按钮，就可以看到生成了一个角色资源文件，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=YmQyYmViYTZjZmUwYjA2NGM1NTEyM2I5NDkxZDU4MzlfVnNmaDVRSlQ3RXJYTWdZYzRORlVkNElXZ0ZQSWNxU2VfVG9rZW46Ym94Y25DNkdrN2duZVFOSTk4TFBCUHZhNktsXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

关闭角色编辑器，在弹出的提示框中选择“不保存”，因为我们不希望立刻应用当前新的服饰内容，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=NzFlYTI0NTNjYjVkZmJlYTRjNTFjNmQxNjdhZjgxOWZfVzUyVnpaYkM4ZnpUdm5pVUptVGV6SFJocEdZUGVSVXlfVG9rZW46Ym94Y25wbVlIdjZlV2M3WmtJdzdSQTJlNXViXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MDMwNGNhZTc1NzBmODBkMWQxOTNlYjNkZjg2NWMwMGVfMnBucDlYUWxNQjF4bVdxbnBpQzlpOGs0a2h4M1d4NlhfVG9rZW46Ym94Y25ZUFhEd1ZERmtwa20yaHNrRkxiQjZkXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

在“工程内容”窗口中的“角色”选项中，选中我们刚保存的角色数据文件，右键菜单中选择“复制工程内容ID”即可复制角色数据的ID，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTZhNThiNzRmZmZiY2YwMTgzNGRmZTlhOWUxYTk4NGZfU1NMRkpPdjByMkE2WUxvcTJhcDJMWnJ0Rm9DV0lVVmRfVG9rZW46Ym94Y25iN09CeTBEN3g1SHV6bTRRYm9JaHFmXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 3.导入导出

在功能“工程内容”里找到已经存在的角色数据文件，右键可以选中导出按钮进行导出，其他项目也能使用该数据

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDhlYmIxYzAzNzExOWVhMGI5M2Q4NThiYzZhODRlNjhfMjI5S2JNamRjWUxGRFpNZWNyMFJmbmQyc2tkY1pLVmJfVG9rZW46Ym94Y25Sbm1hc1FlZEU0OEZoSW1FajFWanJlXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

在功能“工程内容”里找到并点击“导入角色形象数据”

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=YTgzMWQwNDA3NDYwOWEyMTUzMGNhYzJiMDc2ZDRlOTRfY1p6cUFBaHZVZ1B6SjNtem55VUVVQ1A2czFoeEFoU0NfVG9rZW46Ym94Y25xeW04MFQwNWYxY0dGUmdKTkc2VDlmXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

选择存储的数据并打开

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=NTQ3NjNkODhlMDM0MmU1YmM3ZWNhZjhhZmMzMDc1NGVfZnZsNVR5VjhEMTZhSzRGNGlLSFU0VHJzYkRrOXU0bmlfVG9rZW46Ym94Y242WVc5RnJ4QlJSNWNPZ1dhdjBnMmJlXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

已成功添加

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=NDE3MzUzZmQ1ZDczZTRiNTM0OTRjYjRlY2NkNmU4NWZfSkhnejBKVjhTSHRKdmlSQTdiNzlWbldrOHZReVMySmFfVG9rZW46Ym94Y25BeGRWcVdaMHVMVzJ0TURFMTQ0enpkXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 4.玩家角色使用数据

1. 方法1：

首先运行游戏，当前角色并没有使用我们的角色数据，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MzFkMjZhNjZjNDAwMTQ4MzFhYzM3ZjY3ZjhhNjFkMmFfUzVwbjgzNjhSOUlwRVJFMUhaZTNrTVQ4SWZsYnh0cWNfVG9rZW46Ym94Y25yRjJha2tqSUdGYmg3T1BmMXhaaTFlXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

创建一个脚本挂载到场景中，编写脚本代码如下：

```TypeScript
@Core.Class
export default class PlayerControl extends Core.Script {

    /** 当脚本被实例后，会在第一帧更新前调用此函数 */
    protected onStart() {  
        //只有在客户端中才能获取该客户端对应的玩家 
        if(Util.SystemUtil.isClient()){
            //异步获取当前客户端对应的玩家对象
           Gameplay.asyncGetCurrentPlayer().then(player=>{
                setTimeout(() => {
                    //5秒后进行换装操作,这里的参数就粘贴我们在上一小节中最后复制的角色资源ID
                    player.character.loadSlotAndEditorDataByGuid("1D4DEBAC4305D268DD0F5C8118F356E8")
                }, 5000);
           })
        }
    }
}
```

运行游戏，5秒后主角就会动态使用我们的数据了，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=YjE0ZGEyNDE3OWVjMGE3ODEwOWQ4NDhjM2VjNWU4NjFfeGtKTzZuR050NTV5dVZmRlp1TmRDTzhsZGVOQW9VTFFfVG9rZW46Ym94Y25oakM1ZExrMWZ2czJVU2VRYXdzVFBjXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

2. 方法2：

编辑玩家形象后，取消勾选**使用平台角色形象**

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=MGY3NDI2ZDA3MjgyMzJmYzg2NTYzOTZkMzk5MmNmZDVfWml5SUlEZGhIWGhQQlBxcmFXOHJRblhZMUd1U0wwMnBfVG9rZW46Ym94Y25Ud2psV01BMG1iTkZVVGZyT1haYkVkXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

如果在编辑器创建了其他角色形象，想要应用到Player里，那么可以通过将工程内容里的角色拖拽到主视口里达到替换的目的

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=NmQwZjdiZGQwNGI1NDMyYjcyMTk3MDRlYTUwNWU5ZWNfYUJBZnRsNnlhWW1DbElIWDdONzhPVlBrZ09iRzVtWkdfVG9rZW46Ym94Y251T2J4N29BV09iaXVDV1VWUVF3enBnXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

最后需要记得保存修改

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=ODI1N2U4MWExMWFlNDg1NTFmZjUzZDQyOGQ0NDZlZWNfN1NxdkdCVTFKQ2lnNEZINjJsUjhXS280Qk9tV1BpUnNfVG9rZW46Ym94Y25VclZ2Mmx4cGY0TjFXdXduak4wWHpkXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

## 5.NPC角色使用数据

在当前项目中，向场景中拖拽一个人型对象V2，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=NjkzOWJkNzYxZDBkMmFkNmFhOTMxNGM2MjgzMmM4NmVfaVVDOW45MEUybVVRdjdSQmlldDg0RzE2dFJsTnVMRFJfVG9rZW46Ym94Y25kOU1SUGRBVjZ4N3lkdG1zcVpsWWhjXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

创建一个脚本，并挂载到人型对象下方，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDE2MGFlYzc4N2ZmMmY4MzFkNTMyZWUzOWU4MzZiOTlfUDdIVjRZd2MwcFJ1blg1Yml2bHVtWE84WlR0MklYZTNfVG9rZW46Ym94Y25GTDR6bFJWdVdyQlFHb3htRGdvQ3pkXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

* 方法一：

```TypeScript
@Core.Class
export default class NPCControl extends Core.Script {

    /** 当脚本被实例后，会在第一帧更新前调用此函数 */
    protected onStart(): void {
        //在客户端中给NPC换装
        if(Util.SystemUtil.isClient()){
            //首先获取当前人型对象
            let humanoid = this.gameObject as Gameplay.Humanoid
            //加载玩家角色的角色ID，把上面复制的角色ID粘到这里就好
            humanoid.loadSlotAndEditorDataByGuid("1D4DEBAC4305D268DD0F5C8118F356E8")
        }
    }
}
```

运行游戏，可以看到后面的人型角色已经使用了我们的角色数据，如图：

![](https://meta.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDAxMzA1MTE1MWFiMjJiM2U4NmZhYTI3MTNlNDIxY2ZfWUZXMnZENFNpYndwcHJ2Q3ZXR24yTDF3UHB0eHJ5b3ZfVG9rZW46Ym94Y25YZkpTaUZJQWo3dkRxUHBkTUkzbXhjXzE2ODA3MDIzNDY6MTY4MDcwNTk0Nl9WNA)

* 方法二：

```TypeScript
// 异步获取当前玩家，避免获取失败
let player = await Gameplay.asyncGetCurrentPlayer();
// 设置外观修改功能，并获取到HumanoidV2对象
let humanoidV2 = player.character.setAppearance(Gameplay.HumanoidV2)
// 通过角色数据设置外观
humanoidV2.setAppearanceData(["142187"], () => {
    // 不调用这一行，其他玩家将看不到自己换装
    player.character.setAppearance(Gameplay.HumanoidV2).appearanceSync()
})
```

**loadSlotAndEditorDataByGuid() ****和**** setAppearanceData() 的****区分**

客户端情况下：
character.loadSlotAndEditorDataByGuid() 能够成功加载外观和插槽
humanoidV2.setAppearanceData() 只能够加载外观，不能加载插槽。如果要加载插槽，只能单独调用一次humanoidV2.setSlot()

服务端情况下:
character.loadSlotAndEditorDataByGuid() 只能加载插槽
humanoidV2.setAppearanceData() 什么都加载不出来
不过可以在setAppearanceData之后调用一次appearanceSync()，就能够看见装扮了；另外插槽依旧是需要单独调用一次humanoidV2.setSlot()

结论：
1.服务端换装不会自动同步到客户端，需要手动同步
2.loadSlotAndEditorDataByGuid能加载装扮和插槽
3.setAppearanceData只能加载装扮

**按部位换装 ****和**** 通过角色数据换装 的****区别**

按部位换装：

按部位换装，传入的GUID**只能是**MWEditor左侧资源列表里面的GUID

代表API：humanoidV2.部位.setMesh()

```
humanoidV2.setSuit()
```

通过角色数据换装：

通过角色数据换装，传入的GUID**只能是**通过角色编辑器编辑后导出的角色数据的GUID

代表API：character.loadSlotAndEditorDataByGuid()

```
humanoidV2.setAppearanceData()
```

训练营的同学请注意：

学完本小节后，不要忘记使用角色编辑器捏一个喜欢的角色，截图发群里并艾特**@魏浩宁 **

**暂时无法在MetaApp文档外展示此内容**

